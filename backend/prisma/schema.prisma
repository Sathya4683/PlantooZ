generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email     String   @unique
  name      String?

  posts    Posts[]
  comments Comments[]
  likes    PostLikes[]
}

model Items {
  item_id    Int     @id @default(autoincrement())
  item_name  String
  item_price Decimal @db.Decimal(10, 2)
}

model Posts {
  id          Int         @id @default(autoincrement())
  userId      Int
  contentText String
  imageUrl    String?
  postType    String      @default("TEXT")
  createdAt   DateTime    @default(now())
  user        Users       @relation(fields: [userId], references: [id])
  comments    Comments[]
  likes       PostLikes[]

  @@index([createdAt])
}

model Comments {
  id          Int      @id @default(autoincrement())
  postId      Int
  userId      Int
  commentText String
  createdAt   DateTime @default(now())

  post Posts @relation(fields: [postId], references: [id])
  user Users @relation(fields: [userId], references: [id])
}

model PostLikes {
  id     Int @id @default(autoincrement())
  postId Int
  userId Int

  post Posts @relation(fields: [postId], references: [id])
  user Users @relation(fields: [userId], references: [id])

  @@unique([postId, userId])
}
